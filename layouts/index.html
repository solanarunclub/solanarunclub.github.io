{{- define "main" }}

<div class="linktree">
    {{- with site.Params.linktree }}
    <div class="linktree-header">
        {{- if .imageUrl }}
        <img draggable="false" src="{{ .imageUrl | absURL }}" alt="{{ .imageTitle | default site.Title }}" 
            class="linktree-image" />
        {{- end }}
        <h1>{{ .title | default site.Title | markdownify }}</h1>
        {{- if .subtitle }}
        <p class="linktree-subtitle">{{ .subtitle | markdownify }}</p>
        {{- end }}
    </div>

    {{- range .sections }}
    <div class="linktree-section">
        <h2 class="linktree-section-title">{{ .title }}</h2>
        <div class="linktree-links">
            {{- range .links }}
            {{- $isExternal := findRE "^https?://" .url }}
            {{- $isExternalDomain := and $isExternal (not (findRE "solanarunclub\\.com" .url)) }}
            <a href="{{ .url }}" {{ if $isExternalDomain }}target="_blank" rel="noopener noreferrer"{{ end }} class="linktree-link">
                {{- if .icon }}
                <span class="linktree-icon">
                    {{ partial "custom-svg.html" (dict "name" .icon) }}
                </span>
                {{- end }}
                <span class="linktree-link-text">{{ .name }}</span>
                {{- if $isExternalDomain }}
                <svg class="external-link-icon" fill="none" stroke="currentColor" stroke-linecap="round"
                    stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" height="16" width="16">
                    <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                    <path d="M15 3h6v6"></path>
                    <path d="M10 14L21 3"></path>
                </svg>
                {{- end }}
            </a>
            {{- end }}
        </div>
    </div>
    {{- end }}
    {{- end }}
</div>

{{- end }}
